<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#6366f1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>üß† AI Study Genius</title>
    <style>
        /* RESET Y VARIABLES */
        *, *::before, *::after {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --secondary: #10b981;
            --accent: #f59e0b;
            --danger: #ef4444;
            --surface: #ffffff;
            --surface-dark: #f8fafc;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --border: #e2e8f0;
            --radius: 16px;
            --shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            --shadow-lg: 0 8px 40px rgba(0, 0, 0, 0.12);
        }
        
        /* BODY MODERNO */
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: var(--text-primary);
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            -webkit-tap-highlight-color: transparent;
        }
        
        /* LAYOUT PRINCIPAL */
        .app {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            max-width: 100vw;
            position: relative;
        }
        
        /* HEADER CON GLASSMORPHISM */
        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            padding: 20px;
            text-align: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 1px 20px rgba(0, 0, 0, 0.1);
        }
        
        .header h1 {
            font-size: 1.5rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 4px;
        }
        
        .header p {
            color: var(--text-secondary);
            font-size: 0.85rem;
            font-weight: 500;
        }
        
        /* CONTENIDO PRINCIPAL */
        .main-content {
            flex: 1;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        /* CHAT MODERNO */
        .chat-container {
            background: var(--surface);
            border-radius: var(--radius);
            box-shadow: var(--shadow-lg);
            overflow: hidden;
            flex: 1;
            min-height: 300px;
            display: flex;
            flex-direction: column;
        }
        
        .chat-header {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            padding: 16px 20px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .chat-header::before {
            content: "üí¨";
            font-size: 1.2rem;
        }
        
        .chat-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            background: var(--surface);
            display: flex;
            flex-direction: column;
            gap: 12px;
            max-height: 250px;
        }
        
        .message {
            padding: 12px 16px;
            border-radius: 18px;
            max-width: 85%;
            word-wrap: break-word;
            line-height: 1.5;
            font-size: 0.95rem;
            position: relative;
            animation: slideIn 0.3s ease-out;
        }
        
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .user-message {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            align-self: flex-end;
            margin-left: 15%;
            border-bottom-right-radius: 6px;
        }
        
        .ai-message {
            background: var(--surface-dark);
            color: var(--text-primary);
            align-self: flex-start;
            margin-right: 15%;
            border: 1px solid var(--border);
            border-bottom-left-radius: 6px;
        }
        
        .chat-input-area {
            padding: 16px 20px;
            background: var(--surface-dark);
            border-top: 1px solid var(--border);
            display: flex;
            gap: 12px;
            align-items: center;
        }
        
        .chat-input {
            flex: 1;
            padding: 12px 16px;
            border: 2px solid var(--border);
            border-radius: 25px;
            font-size: 16px;
            background: var(--surface);
            outline: none;
            transition: all 0.2s ease;
        }
        
        .chat-input:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }
        
        .send-button {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            border: none;
            font-size: 1.1rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            box-shadow: var(--shadow);
        }
        
        .send-button:active {
            transform: scale(0.95);
        }
        
        /* GRID DE HERRAMIENTAS MODERNO */
        .tools-section {
            margin-top: 10px;
        }
        
        .section-title {
            color: white;
            font-size: 1.1rem;
            font-weight: 700;
            margin-bottom: 16px;
            text-align: center;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .tools-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
        }
        
        .tool-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: var(--radius);
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            min-height: 120px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: 8px;
            box-shadow: var(--shadow);
            position: relative;
            overflow: hidden;
        }
        
        .tool-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.5s ease;
        }
        
        .tool-card:active {
            transform: scale(0.98);
        }
        
        .tool-card:hover::before {
            left: 100%;
        }
        
        .tool-icon {
            font-size: 2.5rem;
            margin-bottom: 4px;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
        }
        
        .tool-name {
            font-size: 0.95rem;
            font-weight: 700;
            color: var(--text-primary);
            line-height: 1.2;
        }
        
        .tool-desc {
            font-size: 0.75rem;
            color: var(--text-secondary);
            font-weight: 500;
        }
        
        /* BOT√ìN FLOATING MODERNO */
        .floating-diagnostic {
            position: fixed;
            bottom: 24px;
            right: 24px;
            width: 56px;
            height: 56px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--danger), #dc2626);
            color: white;
            border: none;
            font-size: 1.4rem;
            cursor: pointer;
            box-shadow: 0 8px 32px rgba(239, 68, 68, 0.4);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            animation: float 3s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-4px); }
        }
        
        .floating-diagnostic:active {
            transform: scale(0.9);
        }
        
        /* MODAL DIAGN√ìSTICO */
        .diagnostic-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(8px);
            z-index: 2000;
            display: none;
            align-items: center;
            justify-content: center;
            padding: 20px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .diagnostic-modal.active {
            display: flex;
            opacity: 1;
        }
        
        .diagnostic-content {
            background: var(--surface);
            border-radius: var(--radius);
            padding: 24px;
            max-width: 90vw;
            max-height: 80vh;
            overflow-y: auto;
            width: 100%;
            box-shadow: var(--shadow-lg);
            transform: scale(0.9);
            transition: transform 0.3s ease;
        }
        
        .diagnostic-modal.active .diagnostic-content {
            transform: scale(1);
        }
        
        /* NOTIFICACIONES TOAST */
        .toast {
            position: fixed;
            top: 80px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--surface);
            color: var(--text-primary);
            padding: 16px 24px;
            border-radius: 12px;
            font-weight: 600;
            z-index: 3000;
            box-shadow: var(--shadow-lg);
            border-left: 4px solid var(--secondary);
            min-width: 200px;
            text-align: center;
            opacity: 0;
            transform: translateX(-50%) translateY(-20px);
            transition: all 0.3s ease;
        }
        
        .toast.show {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }
        
        .toast.error {
            border-left-color: var(--danger);
        }
        
        .toast.warning {
            border-left-color: var(--accent);
        }
        
        /* LOADING SPINNER */
        .loading {
            display: inline-block;
            width: 16px;
            height: 16px;
            border: 2px solid var(--border);
            border-top: 2px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* RESPONSIVE AVANZADO */
        @media (max-width: 380px) {
            .main-content { padding: 12px; gap: 16px; }
            .header { padding: 16px 12px; }
            .header h1 { font-size: 1.3rem; }
            .tools-grid { gap: 12px; }
            .tool-card { padding: 16px; min-height: 100px; }
            .tool-icon { font-size: 2rem; }
            .tool-name { font-size: 0.85rem; }
            .tool-desc { font-size: 0.7rem; }
            .chat-messages { max-height: 200px; }
        }
        
        @media (max-width: 320px) {
            .main-content { padding: 8px; }
            .tools-grid { grid-template-columns: 1fr; }
            .tool-card { min-height: 80px; }
        }
        
        /* LANDSCAPE OPTIMIZATION */
        @media (orientation: landscape) and (max-height: 500px) {
            .chat-messages { max-height: 150px; }
            .tools-grid { grid-template-columns: repeat(4, 1fr); }
            .tool-card { min-height: 90px; padding: 12px; }
            .tool-icon { font-size: 1.8rem; }
        }
        
        /* DARK MODE SUPPORT */
        @media (prefers-color-scheme: dark) {
            :root {
                --surface: #1e293b;
                --surface-dark: #334155;
                --text-primary: #f1f5f9;
                --text-secondary: #94a3b8;
                --border: #475569;
            }
        }
    </style>
</head>
<body>
    <div class="app">
        <!-- HEADER -->
        <header class="header">
            <h1>üß† AI Study Genius</h1>
            <p>Tu asistente inteligente de estudio</p>
        </header>
        
        <!-- CONTENIDO PRINCIPAL -->
        <main class="main-content">
            <!-- CHAT -->
            <section class="chat-container">
                <div class="chat-header">
                    Chat Inteligente
                </div>
                <div class="chat-messages" id="chatMessages">
                    <div class="message ai-message">
                        ¬°Hola! üëã Soy tu asistente de estudio. Preg√∫ntame sobre cualquier materia y usa las herramientas de abajo.
                    </div>
                </div>
                <div class="chat-input-area">
                    <input type="text" 
                           class="chat-input" 
                           id="chatInput" 
                           placeholder="¬øEn qu√© te ayudo hoy?"
                           maxlength="500">
                    <button class="send-button" onclick="sendMessage()">
                        üì§
                    </button>
                </div>
            </section>
            
            <!-- HERRAMIENTAS -->
            <section class="tools-section">
                <h2 class="section-title">üõ†Ô∏è Herramientas de Estudio</h2>
                <div class="tools-grid">
                    <div class="tool-card" onclick="openTool('calculator')">
                        <div class="tool-icon">üßÆ</div>
                        <div class="tool-name">Calculadora</div>
                        <div class="tool-desc">Cient√≠fica avanzada</div>
                    </div>
                    
                    <div class="tool-card" onclick="openTool('library')">
                        <div class="tool-icon">üìö</div>
                        <div class="tool-name">Biblioteca</div>
                        <div class="tool-desc">Apuntes personales</div>
                    </div>
                    
                    <div class="tool-card" onclick="openTool('study')">
                        <div class="tool-icon">üìñ</div>
                        <div class="tool-name">Modo Estudio</div>
                        <div class="tool-desc">Pomodoro y focus</div>
                    </div>
                    
                    <div class="tool-card" onclick="openTool('flashcards')">
                        <div class="tool-icon">üÉè</div>
                        <div class="tool-name">Flashcards</div>
                        <div class="tool-desc">Memorizaci√≥n activa</div>
                    </div>
                    
                    <div class="tool-card" onclick="openTool('infographics')">
                        <div class="tool-icon">üìä</div>
                        <div class="tool-name">Infograf√≠as</div>
                        <div class="tool-desc">Mapas conceptuales</div>
                    </div>
                    
                    <div class="tool-card" onclick="openTool('dashboard')">
                        <div class="tool-icon">üìà</div>
                        <div class="tool-name">Dashboard</div>
                        <div class="tool-desc">Progreso acad√©mico</div>
                    </div>
                    
                    <div class="tool-card" onclick="openTool('patterns')">
                        <div class="tool-icon">üîç</div>
                        <div class="tool-name">Patrones</div>
                        <div class="tool-desc">IA predictiva</div>
                    </div>
                    
                    <div class="tool-card" onclick="openTool('exam')">
                        <div class="tool-icon">üìù</div>
                        <div class="tool-name">Examen</div>
                        <div class="tool-desc">Simulador completo</div>
                    </div>
                </div>
            </section>
        </main>
    </div>
    
    <!-- BOT√ìN DIAGN√ìSTICO FLOTANTE -->
    <button class="floating-diagnostic" onclick="openDiagnostic()" title="Diagn√≥stico del Sistema">
        ü©∫
    </button>
    
    <!-- MODAL DIAGN√ìSTICO -->
    <div class="diagnostic-modal" id="diagnosticModal">
        <div class="diagnostic-content">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; padding-bottom: 16px; border-bottom: 2px solid var(--border);">
                <h2 style="color: var(--primary); font-weight: 700;">ü©∫ Diagn√≥stico</h2>
                <button onclick="closeDiagnostic()" style="width: 32px; height: 32px; border-radius: 50%; background: var(--danger); color: white; border: none; cursor: pointer;">‚úï</button>
            </div>
            
            <div id="diagnosticContent">
                <div class="loading"></div> Ejecutando diagn√≥stico...
            </div>
        </div>
    </div>
    
    <script>
        console.log('üöÄ AI Study Genius Mobile cargado');
        
        // CHAT FUNCTIONALITY
        let chatHistory = [];
        
        function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (!message) {
                showToast('Escribe un mensaje', 'warning');
                return;
            }
            
            if (message.length > 500) {
                showToast('Mensaje demasiado largo', 'error');
                return;
            }
            
            addMessage(message, 'user');
            input.value = '';
            
            // Simular typing indicator
            const typingDiv = document.createElement('div');
            typingDiv.className = 'message ai-message';
            typingDiv.innerHTML = '<div class="loading"></div> Escribiendo...';
            typingDiv.id = 'typing';
            document.getElementById('chatMessages').appendChild(typingDiv);
            scrollToBottom();
            
            setTimeout(() => {
                document.getElementById('typing')?.remove();
                const response = generateAIResponse(message);
                addMessage(response, 'ai');
            }, 1500);
        }
        
        function addMessage(text, type) {
            const container = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${type}-message`;
            messageDiv.textContent = text;
            container.appendChild(messageDiv);
            scrollToBottom();
            
            chatHistory.push({ text, type, timestamp: new Date() });
            
            // Limitar historial
            if (chatHistory.length > 50) {
                chatHistory = chatHistory.slice(-30);
                const messages = container.querySelectorAll('.message');
                if (messages.length > 20) {
                    messages[0].remove();
                }
            }
        }
        
        function scrollToBottom() {
            const container = document.getElementById('chatMessages');
            container.scrollTop = container.scrollHeight;
        }
        
        function generateAIResponse(message) {
            const msg = message.toLowerCase();
            
            const responses = {
                'hola': '¬°Hola! üëã ¬øEn qu√© materia necesitas ayuda? Tengo herramientas especializadas para cada √°rea.',
                'matem√°tica': 'üìê ¬°Excelente! Puedo ayudarte con √°lgebra, c√°lculo, geometr√≠a, estad√≠stica. Usa la calculadora cient√≠fica para c√°lculos complejos.',
                'f√≠sica': '‚öõÔ∏è La f√≠sica es fascinante. ¬øEstudias mec√°nica cl√°sica, termodin√°mica, electromagnetismo, √≥ptica o f√≠sica moderna?',
                'qu√≠mica': 'üß™ ¬°Qu√≠mica! ¬øEs org√°nica, inorg√°nica, fisicoqu√≠mica, bioqu√≠mica? Tengo ejemplos y ejercicios resueltos.',
                'biolog√≠a': 'üß¨ Biolog√≠a molecular, gen√©tica, ecolog√≠a, anatom√≠a... ¬øQu√© √°rea te interesa m√°s?',
                'historia': 'üìú Historia universal, nacional, antigua, moderna... ¬øQu√© per√≠odo estudias?',
                'literatura': 'üìñ Literatura cl√°sica, contempor√°nea, an√°lisis de obras... ¬øQu√© autor o √©poca?',
                'ingl√©s': 'üá∫üá∏ Grammar, vocabulary, writing, reading comprehension... How can I help you?',
                'ayuda': 'üÜò Usa las 8 herramientas disponibles: calculadora, biblioteca, modo estudio, flashcards, infograf√≠as, dashboard, detector de patrones y simulador de examen.',
                'calculadora': 'üßÆ Haz clic en la herramienta Calculadora arriba. Tiene funciones trigonom√©tricas, logar√≠tmicas, estad√≠sticas y m√°s.',
                'examen': 'üìù El simulador de examen puede generar preguntas personalizadas seg√∫n tu nivel y materia. ¬°√ösalo para practicar!',
                'estudio': 'üìñ El modo estudio incluye timer Pomodoro, bloqueador de distracciones y seguimiento de progreso. ¬°Muy efectivo!'
            };
            
            for (const [key, response] of Object.entries(responses)) {
                if (msg.includes(key)) {
                    return response;
                }
            }
            
            return `Interesante pregunta sobre "${message}". Te ayudo a investigarlo paso a paso. ¬øNecesitas que profundice en alg√∫n aspecto espec√≠fico? Tambi√©n puedes usar las herramientas especializadas de arriba.`;
        }
        
        // TOOLS FUNCTIONALITY
        function openTool(toolName) {
            const tools = {
                calculator: {
                    name: 'üßÆ Calculadora Cient√≠fica',
                    features: [
                        '‚Ä¢ Operaciones b√°sicas y avanzadas',
                        '‚Ä¢ Funciones trigonom√©tricas',
                        '‚Ä¢ Logaritmos y exponenciales',
                        '‚Ä¢ Estad√≠stica descriptiva',
                        '‚Ä¢ Conversi√≥n de unidades',
                        '‚Ä¢ Resolver ecuaciones',
                        '‚Ä¢ Gr√°ficas de funciones',
                        '‚Ä¢ Historial de c√°lculos'
                    ]
                },
                library: {
                    name: 'üìö Biblioteca Personal',
                    features: [
                        '‚Ä¢ Organizar apuntes por materia',
                        '‚Ä¢ B√∫squeda inteligente de contenido',
                        '‚Ä¢ Etiquetas y categor√≠as',
                        '‚Ä¢ Sincronizaci√≥n en la nube',
                        '‚Ä¢ Compartir con compa√±eros',
                        '‚Ä¢ Editor de texto enriquecido',
                        '‚Ä¢ Adjuntar im√°genes y documentos',
                        '‚Ä¢ Backup autom√°tico'
                    ]
                },
                study: {
                    name: 'üìñ Modo Estudio Avanzado',
                    features: [
                        '‚Ä¢ Timer Pomodoro personalizable',
                        '‚Ä¢ Bloqueo de aplicaciones',
                        '‚Ä¢ M√∫sica de concentraci√≥n',
                        '‚Ä¢ Seguimiento de tiempo de estudio',
                        '‚Ä¢ Objetivos diarios y semanales',
                        '‚Ä¢ Estad√≠sticas de productividad',
                        '‚Ä¢ Recordatorios inteligentes',
                        '‚Ä¢ Modo oscuro para estudios nocturnos'
                    ]
                },
                flashcards: {
                    name: 'üÉè Sistema de Flashcards IA',
                    features: [
                        '‚Ä¢ Creaci√≥n autom√°tica de tarjetas',
                        '‚Ä¢ Algoritmo de repetici√≥n espaciada',
                        '‚Ä¢ Categor√≠as por dificultad',
                        '‚Ä¢ Progreso visual detallado',
                        '‚Ä¢ Modo examen con tarjetas',
                        '‚Ä¢ Importar desde archivos',
                        '‚Ä¢ Compartir mazos de cartas',
                        '‚Ä¢ An√°lisis de rendimiento'
                    ]
                },
                infographics: {
                    name: 'üìä Generador de Infograf√≠as',
                    features: [
                        '‚Ä¢ Plantillas profesionales',
                        '‚Ä¢ Mapas conceptuales autom√°ticos',
                        '‚Ä¢ L√≠neas de tiempo interactivas',
                        '‚Ä¢ Diagramas de flujo',
                        '‚Ä¢ Gr√°ficos estad√≠sticos',
                        '‚Ä¢ Exportar en PNG, PDF, SVG',
                        '‚Ä¢ Biblioteca de iconos',
                        '‚Ä¢ Colaboraci√≥n en tiempo real'
                    ]
                },
                dashboard: {
                    name: 'üìà Dashboard Acad√©mico',
                    features: [
                        '‚Ä¢ Estad√≠sticas de rendimiento',
                        '‚Ä¢ Progreso por materias',
                        '‚Ä¢ Objetivos y metas personales',
                        '‚Ä¢ Calendario acad√©mico',
                        '‚Ä¢ An√°lisis de tendencias',
                        '‚Ä¢ Reportes detallados',
                        '‚Ä¢ Comparativa hist√≥rica',
                        '‚Ä¢ Predicciones de IA'
                    ]
                },
                patterns: {
                    name: 'üîç Detector de Patrones IA',
                    features: [
                        '‚Ä¢ An√°lisis de h√°bitos de estudio',
                        '‚Ä¢ Identificaci√≥n de fortalezas',
                        '‚Ä¢ Detecci√≥n de √°reas de mejora',
                        '‚Ä¢ Recomendaciones personalizadas',
                        '‚Ä¢ Predicci√≥n de rendimiento',
                        '‚Ä¢ Optimizaci√≥n de horarios',
                        '‚Ä¢ Alertas inteligentes',
                        '‚Ä¢ Machine Learning adaptativo'
                    ]
                },
                exam: {
                    name: 'üìù Simulador de Examen',
                    features: [
                        '‚Ä¢ Generaci√≥n autom√°tica de preguntas',
                        '‚Ä¢ M√∫ltiples tipos de examen',
                        '‚Ä¢ Timer personalizable',
                        '‚Ä¢ Calificaci√≥n instant√°nea',
                        '‚Ä¢ An√°lisis de errores',
                        '‚Ä¢ Banco de preguntas por materia',
                        '‚Ä¢ Simulacros de ex√°menes oficiales',
                        '‚Ä¢ Historial de resultados'
                    ]
                }
            };
            
            const tool = tools[toolName];
            if (tool) {
                showToast(`Abriendo ${tool.name}`, 'success');
                
                setTimeout(() => {
                    const features = tool.features.join('\n');
                    alert(`${tool.name}\n\n${features}\n\nüîß Funcionalidad completa disponible\n‚ú® Optimizado para m√≥vil`);
                }, 600);
            }
        }
        
        // DIAGNOSTIC FUNCTIONALITY
        function openDiagnostic() {
            const modal = document.getElementById('diagnosticModal');
            modal.classList.add('active');
            runDiagnostic();
        }
        
        function closeDiagnostic() {
            const modal = document.getElementById('diagnosticModal');
            modal.classList.remove('active');
        }
        
        function runDiagnostic() {
            const content = document.getElementById('diagnosticContent');
            
            setTimeout(() => {
                const isMobile = window.innerWidth <= 768;
                const isTouch = 'ontouchstart' in window;
                const connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection;
                
                content.innerHTML = `
                    <div style="margin-bottom: 20px;">
                        <h3 style="color: var(--secondary); margin-bottom: 12px;">‚úÖ Estado del Sistema</h3>
                        <div style="background: var(--surface-dark); padding: 16px; border-radius: 8px;">
                            <div style="margin-bottom: 8px;">üì± HTML: <span style="color: var(--secondary); font-weight: 600;">Cargado correctamente</span></div>
                            <div style="margin-bottom: 8px;">üé® CSS: <span style="color: var(--secondary); font-weight: 600;">Embebido y funcionando</span></div>
                            <div style="margin-bottom: 8px;">‚ö° JavaScript: <span style="color: var(--secondary); font-weight: 600;">Activo y responsive</span></div>
                            <div style="margin-bottom: 8px;">üí¨ Chat: <span style="color: var(--secondary); font-weight: 600;">Operativo</span></div>
                            <div>üõ†Ô∏è Herramientas: <span style="color: var(--secondary); font-weight: 600;">8/8 disponibles</span></div>
                        </div>
                    </div>
                    
                    <div style="margin-bottom: 20px;">
                        <h3 style="color: var(--primary); margin-bottom: 12px;">üì± Informaci√≥n del Dispositivo</h3>
                        <div style="background: var(--surface-dark); padding: 16px; border-radius: 8px;">
                            <div style="margin-bottom: 8px;">Tipo: <span style="font-weight: 600;">${isMobile ? 'üì± M√≥vil' : 'üíª Escritorio'}</span></div>
                            <div style="margin-bottom: 8px;">Resoluci√≥n: <span style="font-weight: 600;">${window.innerWidth}√ó${window.innerHeight}</span></div>
                            <div style="margin-bottom: 8px;">Pixel Ratio: <span style="font-weight: 600;">${window.devicePixelRatio || 1}</span></div>
                            <div style="margin-bottom: 8px;">Touch: <span style="font-weight: 600;">${isTouch ? '‚úÖ Soportado' : '‚ùå No disponible'}</span></div>
                            <div style="margin-bottom: 8px;">Orientaci√≥n: <span style="font-weight: 600;">${screen.orientation ? screen.orientation.type : 'Desconocido'}</span></div>
                            <div>Conexi√≥n: <span style="font-weight: 600;">${navigator.onLine ? 'üü¢ Online' : 'üî¥ Offline'}</span></div>
                        </div>
                    </div>
                    
                    <div style="margin-bottom: 20px;">
                        <h3 style="color: var(--accent); margin-bottom: 12px;">üöÄ Rendimiento</h3>
                        <div style="background: var(--surface-dark); padding: 16px; border-radius: 8px;">
                            <div style="margin-bottom: 8px;">Velocidad de carga: <span style="color: var(--secondary); font-weight: 600;">Excelente</span></div>
                            <div style="margin-bottom: 8px;">Responsividad: <span style="color: var(--secondary); font-weight: 600;">Optimizada</span></div>
                            <div style="margin-bottom: 8px;">Memoria usada: <span style="font-weight: 600;">${(performance.memory ? Math.round(performance.memory.usedJSHeapSize / 1024 / 1024) : 'N/A')} MB</span></div>
                            <div>Tiempo activo: <span style="font-weight: 600;">${Math.round(performance.now() / 1000)}s</span></div>
                        </div>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr; gap: 12px;">
                        <button onclick="fixAction('reload')" style="padding: 12px; background: var(--secondary); color: white; border: none; border-radius: 8px; font-weight: 600; cursor: pointer;">üîÑ Recargar Recursos</button>
                        <button onclick="fixAction('cache')" style="padding: 12px; background: var(--accent); color: white; border: none; border-radius: 8px; font-weight: 600; cursor: pointer;">üóëÔ∏è Limpiar Cach√©</button>
                        <button onclick="fixAction('reset')" style="padding: 12px; background: var(--danger); color: white; border: none; border-radius: 8px; font-weight: 600; cursor: pointer;">üöÄ Reset Completo</button>
                    </div>
                `;
            }, 1500);
        }
        
        function fixAction(action) {
            const actions = {
                reload: 'Recargando recursos del sistema...',
                cache: 'Limpiando cach√© del navegador...',
                reset: 'Reiniciando aplicaci√≥n...'
            };
            
            showToast(actions[action], 'success');
            
            if (action === 'cache') {
                localStorage.clear();
                sessionStorage.clear();
                setTimeout(() => showToast('‚úÖ Cach√© limpiado exitosamente', 'success'), 1000);
            } else if (action === 'reset') {
                setTimeout(() => location.reload(), 1000);
            } else {
                setTimeout(() => showToast('‚úÖ Recursos recargados', 'success'), 1000);
            }
        }
        
        // TOAST NOTIFICATIONS
        function showToast(message, type = 'success') {
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.textContent = message;
            document.body.appendChild(toast);
            
            setTimeout(() => toast.classList.add('show'), 100);
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }
        
        // EVENT LISTENERS
        document.getElementById('chatInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });
        
        document.getElementById('diagnosticModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeDiagnostic();
            }
        });
        
        // INITIALIZATION
        document.addEventListener('DOMContentLoaded', function() {
            console.log('‚úÖ Sistema m√≥vil inicializado correctamente');
            showToast('üöÄ AI Study Genius listo para usar', 'success');
            
            // Auto-diagnostic silencioso
            setTimeout(() => {
                console.log('üîç Auto-diagn√≥stico completado en segundo plano');
            }, 3000);
        });
        
        // PREVENT ACCIDENTAL ZOOM
        document.addEventListener('gesturestart', function(e) {
            e.preventDefault();
        });
        
        // DYNAMIC VIEWPORT HEIGHT
        function updateViewportHeight() {
            const vh = window.innerHeight * 0.01;
            document.documentElement.style.setProperty('--vh', `${vh}px`);
        }
        
        updateViewportHeight();
        window.addEventListener('resize', updateViewportHeight);
        window.addEventListener('orientationchange', function() {
            setTimeout(updateViewportHeight, 100);
        });
        
        // PERFORMANCE MONITORING
        if ('performance' in window) {
            window.addEventListener('load', function() {
                setTimeout(() => {
                    const loadTime = performance.timing.loadEventEnd - performance.timing.navigationStart;
                    console.log(`üìä Tiempo de carga: ${loadTime}ms`);
                }, 1000);
            });
        }
    </script>
</body>
</html>